## 随机生成位置

最近开发的时候遇到了一个需求，在一个面板上随机生成位置展示一些数据，拿到需求的时候感觉很简单，就是随机生成一些位置数据，但是实现的时候却发现一点都不简单。因为生成的位置总会有一堆重叠在一起，互相遮挡，且刷新又回在其他的位置重叠，类似以下的效果

![image-20220107183922273](/Users/weiwentao/Library/Application Support/typora-user-images/image-20220107183922273.png)

然而这样的效果是不能通过审核的，真正要的效果是随机生成一些尽量不会互相遮挡，位置均匀的显示在面板上。如下效果![image-20220107185426965](/Users/weiwentao/Library/Application Support/typora-user-images/image-20220107185426965.png)

### 思路过程

我想到的解决方案就是遍历要插入面板的所有数据，依次按顺序插入，每次插入的时候去判断当前要插入的点和页面中已有的所有点的位置是否有重合或者覆盖（两点之间的直线距离小于一定的阀值，假设为100）,如果位置有重合或者覆盖就再去重新随机生成新的坐标位置，然后再去重复上面的操作。

1. 遍历要插入面板的所有数据
2. 生成随机位置赋值给当前项
3. 判断当前位置是否和面板中已经插入的数据有重合
   1. 如果重合，重新生成随机位置赋值给当前坐标
   2. 如果不重合，将当前内容插入面板

然而还有一些边界情况需要考虑

当数据较多的时候可能会出现多次插入均失败的情况



想让两个位置的直线距离大于一定的距离，我想到的方式是通过勾股定理计算

![image-20220107194235705](/Users/weiwentao/Library/Application Support/typora-user-images/image-20220107194235705.png)

假设目前有四个位置要插入页面，而我需要计算这四个位置互相之间的直线距离要大于一定的阀值。假设为100。我们要每次插入的时候计算当前的位置与页面已有所以的位置的直线距离小于100

1. 假设有四（A、B、C、D）个点，依次去做插入操作
2. 当第一个值进来的时候页面上没有存在的点，所以直接插入